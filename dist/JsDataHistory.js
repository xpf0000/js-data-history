!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Vue")):"function"==typeof define&&define.amd?define(["Vue"],t):"object"==typeof exports?exports.JsDataHistory=t(require("Vue")):e.JsDataHistory=t(e.Vue)}(this,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(3),a=["N","E","A","D"];function o(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function l(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function s(e,t,n){s.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function u(e,t){u.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function f(e,t){f.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function h(e,t,n){h.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function c(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function p(e){var t=r(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function d(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function y(e){var t=0,n=p(e);if("array"===n)return e.forEach((function(e){t+=y(e)})),t+d("[type: array, hash: "+t+"]");if("object"===n){for(var r in e)if(e.hasOwnProperty(r)){var i="[ type: object, key: "+r+", value hash: "+y(e[r])+"]";t+=d(i)}return t}return t+d("[ type: "+n+" ; value: "+e+"]")}function b(e,t,n,i,a,o,l,c){n=n||[],l=l||[];var d=(a=a||[]).slice(0);if(null!=o){if(i){if("function"==typeof i&&i(d,o))return;if("object"===r(i)){if(i.prefilter&&i.prefilter(d,o))return;if(i.normalize){var v=i.normalize(d,o,e,t);v&&(e=v[0],t=v[1])}}}d.push(o)}"regexp"===p(e)&&"regexp"===p(t)&&(e=e.toString(),t=t.toString());var g,m,x,O,j=r(e),k=r(t),w="undefined"!==j||l&&l.length>0&&l[l.length-1].lhs&&Object.getOwnPropertyDescriptor(l[l.length-1].lhs,o),S="undefined"!==k||l&&l.length>0&&l[l.length-1].rhs&&Object.getOwnPropertyDescriptor(l[l.length-1].rhs,o);if(!w&&S)n.push(new u(d,t));else if(!S&&w)n.push(new f(d,e));else if(p(e)!==p(t))n.push(new s(d,e,t));else if("date"===p(e)&&e-t!=0)n.push(new s(d,e,t));else if("object"===j&&null!==e&&null!==t){for(g=l.length-1;g>-1;--g)if(l[g].lhs===e){O=!0;break}if(O)e!==t&&n.push(new s(d,e,t));else{if(l.push({lhs:e,rhs:t}),Array.isArray(e)){for(c&&(e.sort((function(e,t){return y(e)-y(t)})),t.sort((function(e,t){return y(e)-y(t)}))),g=t.length-1,m=e.length-1;g>m;)n.push(new h(d,g,new u(void 0,t[g--])));for(;m>g;)n.push(new h(d,m,new f(void 0,e[m--])));for(;g>=0;--g)b(e[g],t[g],n,i,d,g,l,c)}else{var N=Object.keys(e),A=Object.keys(t);for(g=0;g<N.length;++g)x=N[g],(O=A.indexOf(x))>=0?(b(e[x],t[x],n,i,d,x,l,c),A[O]=null):b(e[x],void 0,n,i,d,x,l,c);for(g=0;g<A.length;++g)(x=A[g])&&b(void 0,t[x],n,i,d,x,l,c)}l.length=l.length-1}}else e!==t&&("number"===j&&isNaN(e)&&isNaN(t)||n.push(new s(d,e,t)))}function v(e,t,n,r,i){var a=[];if(b(e,t,a,r,null,null,null,i),n)for(var o=0;o<a.length;++o)n(a[o]);return a}function g(e,t,n){if(void 0===n&&t&&~a.indexOf(t.kind)&&(n=t),e&&n&&n.kind){for(var r=e,o=-1,l=n.path?n.path.length-1:0;++o<l;){if(void 0===r[n.path[o]]){var s=void 0!==n.path[o+1]&&"number"==typeof n.path[o+1]?[]:{};i&&i.set(r,n.path[o],s),r[n.path[o]]=s}r=r[n.path[o]]}switch(n.kind){case"A":n.path&&void 0===r[n.path[o]]&&(i&&i.set(r,n.path[o],[]),r[n.path[o]]=[]),function e(t,n,r){if(r.path&&r.path.length){var a,o=t[n],l=r.path.length-1;for(a=0;a<l;a++)o=o[r.path[a]];switch(r.kind){case"A":e(o[r.path[a]],r.index,r.item);break;case"D":i&&i.delete(o,r.path[a]),delete o[r.path[a]];break;case"E":case"N":i&&i.set(o,r.path[a],r.rhs),o[r.path[a]]=r.rhs}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":t=c(t,n);break;case"E":case"N":i&&i.set(t,n,r.rhs),t[n]=r.rhs}return t}(n.path?r[n.path[o]]:r,n.index,n.item);break;case"D":i&&i.delete(r,n.path[o]),delete r[n.path[o]];break;case"E":case"N":i&&i.set(r,n.path[o],n.rhs),r[n.path[o]]=n.rhs}}}o(s,l),o(u,l),o(f,l),o(h,l),e.exports={diff:function(e,t,n,r){var i=v(e,t,r?function(e){e&&r.push(e)}:void 0,n);return r||(i.length?i:void 0)},observableDiff:v,applyDiff:function(e,t,n){if(e&&t){v(e,t,(function(r){n&&!n(e,t,r)||g(e,t,r)}))}},applyChange:g,revertChange:function(e,t,n){if(e&&t&&n&&n.kind){var r,a,o=e;for(a=n.path.length-1,r=0;r<a;r++)void 0===o[n.path[r]]&&(i&&i.set(o,n.path[r],{}),o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function e(t,n,r){if(r.path&&r.path.length){var a,o=t[n],l=r.path.length-1;for(a=0;a<l;a++)o=o[r.path[a]];switch(r.kind){case"A":e(o[r.path[a]],r.index,r.item);break;case"D":case"E":i&&i.set(o,r.path[a],r.lhs),o[r.path[a]]=r.lhs;break;case"N":i&&i.delete(o,r.path[a]),delete o[r.path[a]]}}else switch(r.kind){case"A":e(t[n],r.index,r.item);break;case"D":case"E":i&&i.set(t,n,r.lhs),t[n]=r.lhs;break;case"N":t=c(t,n)}return t}(o[n.path[r]],n.index,n.item);break;case"D":case"E":i&&i.set(o,n.path[r],n.lhs),o[n.path[r]]=n.lhs;break;case"N":i&&i.delete(o,n.path[r]),delete o[n.path[r]]}}}}},function(e,t,n){var r=n(2),i=n(0),a=i.diff,o=i.observableDiff,l=i.applyDiff,s=i.applyChange,u=i.revertChange;e.exports={History:r,diff:a,observableDiff:o,applyDiff:l,applyChange:s,revertChange:u}},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(0),s=l.diff,u=l.applyChange,f=l.revertChange,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;a(this,e),this.index=0,this.list=[],this.last=null,this.max=t,this.current=null}var t,n,i;return t=e,(n=[{key:"init",value:function(e){this.index=0,this.list=[],this.last=JSON.parse(JSON.stringify(e)),this.current=e}},{key:"add",value:function(){var e=s(this.last,this.current);e&&(this.list.length===this.max&&(this.list.splice(0,1),this.index-=1),this.list.splice(this.index),this.list.push(e),this.index+=1,this.last=JSON.parse(JSON.stringify(this.current)))}},{key:"back",value:function(){var e=this;return new Promise((function(t){if(e.index>0){e.index-=1;var n,i=e.list[e.index],a=r(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;f(e.current,e.last,o)}}catch(e){a.e(e)}finally{a.f()}e.last=JSON.parse(JSON.stringify(e.current)),t(i)}}))}},{key:"redo",value:function(){var e=this;return new Promise((function(t){if(e.index<e.list.length){var n,i=e.list[e.index],a=r(i);try{for(a.s();!(n=a.n()).done;){var o=n.value;u(e.current,e.last,o)}}catch(e){a.e(e)}finally{a.f()}e.last=JSON.parse(JSON.stringify(e.current)),e.index+=1,t(i)}}))}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=h},function(t,n){t.exports=e}])}));